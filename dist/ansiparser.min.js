!function(){"use strict";function t(t,e){for(var s=e-t,i=new Array(s);s--;)i[s]=--e;return i}function e(t,e,s,i,r){t[s<<8|e]=(0|i)<<4|(void 0===r?s:r)}function s(t,s,i,r,a){for(var n=0;n<s.length;n++)e(t,s[n],i,r,a)}function i(t){for(var e=t.split(";"),s=0;s<e.length;++s)e[s]=Number(e[s]);return e}function r(t){this.initial_state=0,this.current_state=this.initial_state,this.osc="",this.params="",this.collected="",this.term=t||{};for(var e=["inst_p","inst_o","inst_x","inst_c","inst_e","inst_H","inst_P","inst_U","inst_E"],s=0;s<e.length;++s)e[s]in this.term||(this.term[e[s]]=function(){})}var a=t(32,127),n=t(0,24);n.push(25),n.concat(t(28,32));var c=function(){for(var i=new Uint8Array(4095),r=0;14>r;++r)for(var c=0;160>c;++c)i[r<<8|c]=16;for(s(i,a,0,2),r=0;14>r;++r)s(i,[24,26,153,154],r,3,0),s(i,t(128,144),r,3,0),s(i,t(144,152),r,3,0),e(i,156,r,0,0),e(i,27,r,11,1),e(i,157,r,4,8),s(i,[152,158,159],r,0,7),e(i,155,r,11,3),e(i,144,r,11,9);return s(i,n,0,3),s(i,n,1,3),e(i,127,1),s(i,n,8),s(i,n,3,3),e(i,127,3),s(i,n,4,3),e(i,127,4),s(i,n,6,3),s(i,n,5,3),e(i,127,5),s(i,n,2,3),e(i,127,2),e(i,93,1,4,8),s(i,a,8,5),e(i,127,8,5),s(i,[156,27,24,26,7],8,6,0),s(i,t(28,32),8,0),s(i,[88,94,95],1,0,7),s(i,a,7),s(i,n,7),e(i,156,7,0,0),e(i,91,1,11,3),s(i,t(64,127),3,7,0),s(i,t(48,58),3,8,4),e(i,59,3,8,4),s(i,[60,61,62,63],3,9,4),s(i,t(48,58),4,8),e(i,59,4,8),s(i,t(64,127),4,7,0),s(i,[58,60,61,62,63],4,0,6),s(i,t(32,64),6),e(i,127,6),s(i,t(64,127),6,0,0),e(i,58,3,0,6),s(i,t(32,48),3,9,5),s(i,t(32,48),5,9),s(i,t(48,64),5,0,6),s(i,t(64,127),5,7,0),s(i,t(32,48),4,9,5),s(i,t(32,48),1,9,2),s(i,t(32,48),2,9),s(i,t(48,127),2,10,0),s(i,t(48,80),1,10,0),s(i,[81,82,83,84,85,86,87,89,90,92],1,10,0),s(i,t(96,127),1,10,0),e(i,80,1,11,9),s(i,n,9),e(i,127,9),s(i,t(28,32),9),s(i,t(32,48),9,9,12),e(i,58,9,0,11),s(i,t(48,58),9,8,10),e(i,59,9,8,10),s(i,[60,61,62,63],9,9,10),s(i,n,11),s(i,t(32,128),11),s(i,t(28,32),11),s(i,n,10),e(i,127,10),s(i,t(28,32),10),s(i,t(48,58),10,8),e(i,59,10,8),s(i,[58,60,61,62,63],10,0,11),s(i,t(32,48),10,9,12),s(i,n,12),e(i,127,12),s(i,t(28,32),12),s(i,t(32,48),12,9),s(i,t(48,64),12,0,11),s(i,t(64,127),12,12,13),s(i,t(64,127),10,12,13),s(i,t(64,127),9,12,13),s(i,n,13,13),s(i,a,13,13),e(i,127,13),s(i,[27,156],13,14,0),i}();r.prototype.reset=function(){this.current_state=this.initial_state,this.osc="",this.params="",this.collected=""},r.prototype.parse=function(t){for(var e,s,r,a=!1,n=this.current_state,o="",h="",f=this.osc,u=this.collected,_=this.params,m=0;m<t.length;++m){switch(e=t.charAt(m),s=e.charCodeAt(0),r=160>s?c[n<<8|s]:16,r>>4){case 0:break;case 1:if(s>159)switch(n){case 0:o+=e;break;case 8:f+=e,r|=8;break;case 6:r|=6;break;case 11:r|=11;break;case 13:h+=e,r|=13;break;default:a=!0}else a=!0;if(a){if(this.term.inst_E({pos:m,character:e,state:n,print:o,dcs:h,osc:f,collect:u,params:_}))return;a=!1}break;case 2:o+=e;break;case 3:o&&this.term.inst_p(o),o="",this.term.inst_x(e);break;case 7:this.term.inst_c(u,i(_),e);break;case 8:_+=e;break;case 9:u+=e;break;case 10:this.term.inst_e(u,e);break;case 11:o&&this.term.inst_p(o),o="",f="",_="",u="",h="";break;case 4:o&&this.term.inst_p(o),o="",f="";break;case 5:f+=e;break;case 6:f&&24!==s&&26!==s&&this.term.inst_o(f),27===s&&(r|=1),f="",_="",u="",h="";break;case 12:this.term.inst_H(u,i(_),e);break;case 13:h+=e;break;case 14:h&&this.term.inst_P(h),this.term.inst_U(),27===s&&(r|=1),f="",_="",u="",h=""}n=15&r}!n&&o?this.term.inst_p(o):13===n&&h&&this.term.inst_P(h),this.osc=f,this.collected=u,this.params=_,this.current_state=n},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?define([],function(){return r}):window.AnsiParser=r}();
